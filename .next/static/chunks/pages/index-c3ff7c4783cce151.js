(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{75557:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(10661)}])},10661:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var a=n(85893),s=n(83078),i=n(67294),r=n(4672),p=n(67225),o=n(25675),u=n.n(o),d=n(41942),l=n(35553);function c(e){let{nftAddress:t,tokenId:n,isVisible:p,marketplaceAddress:o,onClose:u}=e,c=(0,d.aa)(),[y,f]=(0,i.useState)(0),m=async e=>{await e.wait(1),c({type:"success",message:"listing updated",title:"Listing updated - please refresh (and move blocks)",position:"topR"}),u&&u(),f("0")},{runContractFunction:b}=(0,s.JX)({abi:r,contractAddress:o,functionName:"updateListing",params:{nftAddress:t,tokenId:n,newPrice:l.fi(y||"0")}});return(0,a.jsx)(d.O,{isVisible:p,onCancel:u,onCloseButtonPressed:u,onOk(){b({onError(e){console.log(e)},onSuccess:m})},children:(0,a.jsx)(d.K,{label:"Update listing price in L1 Currency (ETH)",name:"New listing price",type:"number",onChange(e){f(e.target.value)}})})}let y=(e,t)=>{if(e.length<=t)return e;let n=t-3;return e.substring(0,Math.ceil(n/2))+"..."+e.substring(e.length-Math.floor(n/2))};function f(e){let{price:t,nftAddress:n,tokenId:o,marketplaceAddress:f,seller:m}=e,{isWeb3Enabled:b,account:x}=(0,s.Nr)(),[v,k]=(0,i.useState)(""),[h,N]=(0,i.useState)(""),[w,I]=(0,i.useState)(""),[g,A]=(0,i.useState)(!1),M=()=>A(!1),j=(0,d.aa)(),{runContractFunction:_}=(0,s.JX)({abi:p,contractAddress:n,functionName:"TOKEN_URI"}),{runContractFunction:C}=(0,s.JX)({abi:r,contractAddress:f,functionName:"buyItem",msgValue:t,params:{nftAddress:n,tokenId:o}});async function E(){let e=await _();if(console.log("The TokenURI is ".concat(e)),e){let t=e.replace("ipfs://","https://ipfs.io/ipfs/"),n=await (await fetch(t)).json(),a=n.image,s=a.replace("ipfs://","https://ipfs.io/ipfs/");k(s),N(n.name),I(n.description)}}(0,i.useEffect)(()=>{b&&E()},[b]);let F=m===x||void 0===m,O=F?"you":y(m||"",15),T=()=>{F?A(!0):C({onError:e=>console.log(e),onSuccess:()=>L()})},L=()=>{j({type:"success",message:"Item bought!",title:"Item Bought",position:"topR"})};return(0,a.jsx)("div",{children:(0,a.jsx)("div",{children:v?(0,a.jsxs)("div",{children:[(0,a.jsx)(c,{isVisible:g,tokenId:o,marketplaceAddress:f,nftAddress:n,onClose:M}),(0,a.jsx)(d.r,{title:h,description:w,onClick:T,children:(0,a.jsx)("div",{className:"p-2",children:(0,a.jsxs)("div",{className:"flex flex-col items-end gap-2",children:[(0,a.jsxs)("div",{children:["#",o]}),(0,a.jsxs)("div",{className:"italic text-sm",children:["Owned by ",O]}),(0,a.jsx)(u(),{loader:()=>v,src:v,height:"200",width:"200",alt:"",unoptimized:!0}),(0,a.jsxs)("div",{className:"font-bold",children:[l.bM(t,"ether")," ETH"]})]})})})]}):(0,a.jsx)("div",{children:"Loading..."})})})}var m=n(48036),b=n(7297),x=n(17283);function v(){let e=(0,b.Z)(['\n    {\n        activeItems(first: 5, where: { buyer: "0x0000000000000000000000000000000000000000" }) {\n            id\n            buyer\n            seller\n            nftAddress\n            tokenId\n            price\n        }\n    }\n']);return v=function(){return e},e}let k=(0,x.Ps)(v());var h=n(16991);function N(){let{chainId:e,isWeb3Enabled:t}=(0,s.Nr)(),n=e?parseInt(e).toString():null,i=e?m[n].NftMarketplace[0]:null,{loading:r,error:p,data:o}=(0,h.a)(k);return(0,a.jsxs)("div",{className:"container mx-auto",children:[(0,a.jsx)("h1",{className:"py-4 px-4 font-bold text-2xl",children:"Recently Listed"}),(0,a.jsx)("div",{className:"flex flex-wrap",children:t&&e?r||!o?(0,a.jsx)("div",{children:"Loading..."}):o.activeItems.map(e=>{let{price:t,nftAddress:n,tokenId:s,seller:r}=e;return i?(0,a.jsx)(f,{price:t,nftAddress:n,tokenId:s,marketplaceAddress:i,seller:r},"".concat(n).concat(s)):(0,a.jsx)("div",{children:"Network error, please switch to a supported network. "})}):(0,a.jsx)("div",{children:"Web3 Currently Not Enabled"})})]})}},67225:function(e){"use strict";e.exports=JSON.parse('[{"type":"constructor","payable":false,"inputs":[]},{"type":"event","anonymous":false,"name":"Approval","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"approved","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ApprovalForAll","inputs":[{"type":"address","name":"owner","indexed":true},{"type":"address","name":"operator","indexed":true},{"type":"bool","name":"approved","indexed":false}]},{"type":"event","anonymous":false,"name":"Transfer","inputs":[{"type":"address","name":"from","indexed":true},{"type":"address","name":"to","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"function","name":"TOKEN_URI","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"approve","constant":false,"payable":false,"inputs":[{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"balanceOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"getApproved","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"getTokenCounter","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"isApprovedForAll","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"owner"},{"type":"address","name":"operator"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"mintNft","constant":false,"payable":false,"inputs":[],"outputs":[{"type":"uint256"}]},{"type":"function","name":"name","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"ownerOf","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"address"}]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"safeTransferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"},{"type":"bytes","name":"data"}],"outputs":[]},{"type":"function","name":"setApprovalForAll","constant":false,"payable":false,"inputs":[{"type":"address","name":"operator"},{"type":"bool","name":"approved"}],"outputs":[]},{"type":"function","name":"supportsInterface","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"bytes4","name":"interfaceId"}],"outputs":[{"type":"bool"}]},{"type":"function","name":"symbol","constant":true,"stateMutability":"view","payable":false,"inputs":[],"outputs":[{"type":"string"}]},{"type":"function","name":"tokenURI","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"uint256"}],"outputs":[{"type":"string"}]},{"type":"function","name":"transferFrom","constant":false,"payable":false,"inputs":[{"type":"address","name":"from"},{"type":"address","name":"to"},{"type":"uint256","name":"tokenId"}],"outputs":[]}]')},4672:function(e){"use strict";e.exports=JSON.parse('[{"type":"error","name":"NftMarketplace_AlreadyListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace_NoProceeds","inputs":[]},{"type":"error","name":"NftMarketplace_NotApprovedForMarketplace","inputs":[]},{"type":"error","name":"NftMarketplace_NotListed","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}]},{"type":"error","name":"NftMarketplace_NotOwner","inputs":[]},{"type":"error","name":"NftMarketplace_PriceMustBeAboveZero","inputs":[]},{"type":"error","name":"NftMarketplace_PriceNotMet","inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}]},{"type":"error","name":"NftMarketplace_TransferFailed","inputs":[]},{"type":"event","anonymous":false,"name":"ItemBought","inputs":[{"type":"address","name":"buyer","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"event","anonymous":false,"name":"ItemCanceled","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true}]},{"type":"event","anonymous":false,"name":"ItemListed","inputs":[{"type":"address","name":"seller","indexed":true},{"type":"address","name":"nftAddress","indexed":true},{"type":"uint256","name":"tokenId","indexed":true},{"type":"uint256","name":"price","indexed":false}]},{"type":"function","name":"buyItem","constant":false,"stateMutability":"payable","payable":true,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"cancelListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[]},{"type":"function","name":"getListing","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"}],"outputs":[{"type":"tuple","components":[{"type":"uint256","name":"price"},{"type":"address","name":"seller"}]}]},{"type":"function","name":"getProceeds","constant":true,"stateMutability":"view","payable":false,"inputs":[{"type":"address","name":"seller"}],"outputs":[{"type":"uint256"}]},{"type":"function","name":"listItem","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"price"}],"outputs":[]},{"type":"function","name":"updateListing","constant":false,"payable":false,"inputs":[{"type":"address","name":"nftAddress"},{"type":"uint256","name":"tokenId"},{"type":"uint256","name":"newPrice"}],"outputs":[]},{"type":"function","name":"withdrawProceeds","constant":false,"payable":false,"inputs":[],"outputs":[]}]')},48036:function(e){"use strict";e.exports=JSON.parse('{"5":{"NftMarketplace":["0x782e1DfC5946b97eDC1c824C28fAef99d98262Da"]},"31337":{"NftMarketplace":["0x5FbDB2315678afecb367f032d93F642f64180aa3"]}}')}},function(e){e.O(0,[971,675,774,888,179],function(){return e(e.s=75557)}),_N_E=e.O()}]);